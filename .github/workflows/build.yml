name: RpcView Build

on: [push]

jobs:
  RpcView-x64:

    runs-on: windows-2016

    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Install Qt
        uses: ouuan/install-qt-action@v2.3.1
        with:
          version: 5.9.1
          host: windows
          target: desktop
          arch: win64_msvc2017_64
      - name: Build RpcView-x64
        env:
          CMAKE_PREFIX_PATH: ${{ runner.workspace }}\Qt\5.9.1\msvc2017_64
        run: |
          mkdir Build\x64
          cd Build\x64
          cmake ..\.. -G"Visual Studio 15 2017 Win64"
          cmake --build . --config Release
          ${{ runner.workspace }}\Qt\5.9.1\msvc2017_64\bin\windeployqt.exe .\bin\Release\RpcView.exe
          dir bin\Release

